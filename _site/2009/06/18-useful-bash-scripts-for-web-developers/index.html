<!DOCTYPE html> 
<html lang="en"> 
    <head> 
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <title>18 Useful bash scripts for web developers</title> 
				<meta name="author" content="Ben Emson" />
				<link href="http://feeds.feedburner.com/ben-emson" rel="alternate" title="Ben Emsonr" type="application/atom+xml" />

			   <!-- syntax highlighting CSS -->
			   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

			   <!-- Homepage CSS -->
			   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
    </head> 
 
    <body>  
        <div id="container"> 
 
            <h1><a href="http://blog.emson.co.uk">Ben Emson</a></h1> 
            
            <div id="post">
<h1>18 Useful bash scripts for web developers</h1>

<h2>Using bash scripts to become a more efficient web developer</h2>

<p>Here are a few scripts, that I find really useful for speeding up my web development time.</p>

<p>I've been building up this list as I needed to use them - so they maybe a little raw.</p>

<p>For example often clients send me images with filenames that don't match my naming standard, so running the appropriate script really helps keep me focussed on the job in hand and not waste too much time reformatting filenames etc.</p>

<p>Finally if you have any useful little bash scripts why don't you add them to the comments below?</p>

<h3>Bash script to append a .txt extension to a filename</h3>

<p>Iterate over the current directory, get all files with .log and append .txt to the end of the entire filename:</p>

<div class="highlight"><pre><code class="bash"><span class="k">for </span>i in *.log*; <span class="k">do </span>mv <span class="s2">&quot;$i&quot;</span> <span class="s2">&quot;$i.txt&quot;</span>; <span class="k">done</span>
</code></pre>
</div>


<h3>Script to make filenames lowercase</h3>

<p>Converts all the file names in a directory and converts them to lowercase.</p>

<p>echo version:</p>

<div class="highlight"><pre><code class="bash"><span class="k">for </span>i in *.log*; <span class="k">do </span><span class="nb">echo </span>mv <span class="se">\&quot;</span><span class="nv">$i</span><span class="se">\&quot;</span> <span class="se">\&quot;</span><span class="sb">`</span><span class="nb">echo</span> <span class="nv">$i</span>| tr <span class="o">[</span>A-Z<span class="o">]</span> <span class="o">[</span>a-z<span class="o">]</span><span class="sb">`</span><span class="se">\&quot;</span>; <span class="k">done</span>
</code></pre>
</div>


<p>real version:</p>

<div class="highlight"><pre><code class="bash"><span class="k">for </span>i in *.txt; <span class="k">do </span>mv <span class="s2">&quot;$i&quot;</span> <span class="s2">&quot;`echo $i| tr [A-Z] [a-z]`&quot;</span>; <span class="k">done</span>
</code></pre>
</div>


<h3>Quick note on how to use grep to search for a string in file</h3>

<p>-o print Only the matched parts of a matching line, with each part on a separate line.
-H print the filename for each match.
-n prefix each line of output with the 1 based line number.
-R, -r recursively read all files under subdirectories.</p>

<div class="highlight"><pre><code class="bash">grep -oHnr <span class="s2">&quot;some pattern&quot;</span>  *.txt
</code></pre>
</div>


<p>{txt,log} this globs the file extensions together.
2>/dev/null this passes all errors to a blackhole, so that they won't be displayed.</p>

<div class="highlight"><pre><code class="bash">grep 123741 ./adapter_logs/*.<span class="o">{</span>txt,log<span class="o">}</span> 2&gt;/dev/null
</code></pre>
</div>


<p>Find all occurrences of 123741 in all .txt and .log files in all subdirectories.</p>

<div class="highlight"><pre><code class="bash"><span class="k">for </span>i in <span class="s1">&#39;find . -type d&#39;</span>; <span class="k">do </span>grep 123741 <span class="nv">$i</span>/*.<span class="o">{</span>txt,log<span class="o">}</span>; <span class="k">done </span>2&gt;/dev/null
</code></pre>
</div>


<h3>List all files that match this regular expression in the current direcory</h3>

<p>All files with the number 5 in their name.</p>

<div class="highlight"><pre><code class="bash">ls | grep -e .*5.*
</code></pre>
</div>


<h3>Bash script to check whether a tag exists in a subversion repository</h3>

<div class="highlight"><pre><code class="bash">svn ls http://www.mysvnserver.co.uk/myproject/tags | grep mytag-0.7.0.1/
</code></pre>
</div>


<p>The [ ] is known as a Test, by default it tests integers
Also to end an if statement you use fi</p>

<div class="highlight"><pre><code class="bash"><span class="k">if</span> <span class="o">[</span> <span class="nv">1</span> <span class="o">=</span> 1 <span class="o">]</span> ; <span class="k">then </span><span class="nb">echo </span>YES; <span class="k">else </span><span class="nb">echo </span>NO; <span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;`svn ls http://mysvnserver/mysvnrepository/myproject/tags | grep R-9.20.400.0/`&quot;</span> <span class="o">=</span> <span class="s2">&quot;R-9.20.400.0/&quot;</span> <span class="o">]</span>; <span class="k">then </span><span class="nb">echo </span>YES; <span class="k">else </span><span class="nb">echo </span>NO; <span class="k">fi</span>
</code></pre>
</div>


<p>Note need the / in the evaluation part of "it-0.9.0.7/", don't really need it in grep it-0.9.0.7/</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;`svn ls http://www.mysvnserver.co.uk/myproject/tags | grep it-0.7.0.1/`&quot;</span> <span class="o">=</span> <span class="s2">&quot;it-0.7.0.1/&quot;</span> <span class="o">]</span>; <span class="k">then </span><span class="nb">echo </span>YES; <span class="k">else </span><span class="nb">echo </span>NO; <span class="k">fi</span>
</code></pre>
</div>


<h3>Quick note on how to increment a variable, in a bash script</h3>

<div class="highlight"><pre><code class="bash"><span class="nv">j</span><span class="o">=</span>0; <span class="nv">j</span><span class="o">=</span><span class="k">$((</span><span class="nv">$j</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
</code></pre>
</div>


<p>incrementing in a loop</p>

<div class="highlight"><pre><code class="bash"><span class="nv">j</span><span class="o">=</span>0;for i in *.txt; <span class="k">do </span><span class="nb">echo</span> <span class="s2">&quot;some_file_&quot;</span><span class="nv">$j</span><span class="s2">&quot;.txt&quot;</span>; <span class="nv">j</span><span class="o">=</span><span class="k">$((</span><span class="nv">$j</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>; <span class="k">done</span>
</code></pre>
</div>


<h3>Using a bash for loop to list all text files and append whoopee</h3>

<div class="highlight"><pre><code class="bash"><span class="k">for </span>i in *.txt; <span class="k">do </span><span class="nb">echo</span> <span class="nv">$i</span><span class="s2">&quot;whoopee&quot;</span>; <span class="k">done</span>
</code></pre>
</div>


<h3>Change all filenames to be a specific incremented name, starting from file 16</h3>

<div class="highlight"><pre><code class="bash"><span class="nv">j</span><span class="o">=</span>16;for i in *.jpg; <span class="k">do </span>mv <span class="s2">&quot;$i&quot;</span> <span class="s2">&quot;gallery_&quot;</span><span class="nv">$j</span><span class="s2">&quot;.jpg&quot;</span>; <span class="nv">j</span><span class="o">=</span><span class="k">$((</span><span class="nv">$j</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>; <span class="k">done</span>;ls
</code></pre>
</div>


<h3>Script to loop through all .txt filenames and make them lower case</h3>

<div class="highlight"><pre><code class="bash"><span class="k">for </span>i in *.txt; <span class="k">do </span>mv <span class="s2">&quot;$i&quot;</span> <span class="s2">&quot;`echo $i| tr [A-Z] [a-z]`&quot;</span>; <span class="k">done</span>
</code></pre>
</div>


<h3>Get all JPG files and create the appropriate HTML list tags for them and add them to a file</h3>

<p>Create an HTML version:</p>

<div class="highlight"><pre><code class="bash"><span class="k">for </span>i in *.jpg; <span class="k">do </span><span class="nb">echo</span> <span class="s2">&quot;\t&lt;li&gt;\r\t\t&lt;img src=&#39;images/$i&#39; alt=&#39;&#39; /&gt;\r\t&lt;/li&gt;&quot;</span>; <span class="k">done</span> &gt; list_items.html
</code></pre>
</div>


<p>Create a HAML version:</p>

<div class="highlight"><pre><code class="bash"><span class="k">for </span>i in *.jpg; <span class="k">do </span><span class="nb">echo</span> <span class="s2">&quot;\t%li\r\t\t%img{ :src =&gt; &#39;images/$i&#39;, :alt =&gt; &#39;&#39; }\r&quot;</span>; <span class="k">done</span> &gt; imgs.haml
</code></pre>
</div>


<h3>Batch change a misspelled filename of certain files, using string replacement</h3>

<div class="highlight"><pre><code class="bash"><span class="k">for </span>i in aples*.jpg; <span class="k">do </span>mv <span class="nv">$i</span> <span class="k">${</span><span class="nv">i</span><span class="p">/aples/apples</span><span class="k">}</span> ; <span class="k">done</span>
</code></pre>
</div>


<h3>Script to batch create files based on filenames in a file</h3>

<p>Create a file called something like "my_files.txt" with the following content:</p>

<blockquote><p>archive_error_112480_0040.txt
archive_error_114390_0043.txt
etc...</p></blockquote>

<p>Commands:</p>

<div class="highlight"><pre><code class="bash"><span class="k">for </span>i in <span class="sb">`</span>sed -n -e <span class="s1">&#39;p&#39;</span> my_files.txt<span class="sb">`</span>; <span class="k">do </span>mkdir a_test/<span class="nv">$i</span>; <span class="k">done</span>
or
<span class="k">while </span><span class="nb">read </span>x; <span class="k">do </span>touch <span class="nv">$x</span>; <span class="k">done</span> &lt; my_files.txt
or
cat my_files.txt | xargs touch
<span class="o">(</span>xargs passes each line as an argument into EACH touch<span class="o">)</span>
</code></pre>
</div>


<h3>Using bash Expansions, and allow escapes</h3>

<p>-e is an undocumented flag that allows escapes
Expansion ${command/parameter/substitution} everything else needs to be escaped.</p>

<div class="highlight"><pre><code class="bash"><span class="nb">echo</span> -e <span class="k">${</span><span class="nv">PATH</span><span class="p">//\:/\\n</span><span class="k">}</span>
</code></pre>
</div>


<h3>Executing a .bash_script after making changes</h3>

<div class="highlight"><pre><code class="bash"><span class="nb">source</span> .bash_profile
or
. .bash_profile
</code></pre>
</div>


<p>NB: you can 'include' other bash .sh scripts in a .bash_profile file by using 'source' or '.'</p>

<h3>Quick tip on using curl for downloading files off the web</h3>

<p>Use -O to name the remote file, curl will save it locally but remove the rest of the path.</p>

<div class="highlight"><pre><code class="bash">curl -O http://rubyforge-files.ruby-forum.com/rubygems/rubygems-0.9.0.tgz
</code></pre>
</div>


<h3>Bash command for testing the existence of files and directories</h3>

<p>If a directory does NOT exist create it</p>

<div class="highlight"><pre><code class="bash"><span class="o">[</span> -d <span class="s2">&quot;/var/cache/git&quot;</span> <span class="o">]</span> <span class="o">||</span> mkdir /var/cache/git
</code></pre>
</div>


<p>If a file exists echo a message:</p>

<div class="highlight"><pre><code class="bash"><span class="o">[</span> -f <span class="s2">&quot;./new_file.txt&quot;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;its there&quot;</span>
</code></pre>
</div>


<h3>Bash command to remove spaces from filenames</h3>

<div class="highlight"><pre><code class="bash"><span class="k">for </span>i in *.html; <span class="k">do </span>mv <span class="s2">&quot;$i&quot;</span> <span class="s2">&quot;`echo $i| tr -d &#39; &#39;`&quot;</span>; <span class="k">done</span>
</code></pre>
</div>


<p>replace spaces for underscores</p>

<div class="highlight"><pre><code class="bash"><span class="k">for </span>i in *.html; <span class="k">do </span>mv <span class="s2">&quot;$i&quot;</span> <span class="s2">&quot;`echo $i| tr &#39; &#39; &#39;_&#39;`&quot;</span>; <span class="k">done</span>
</code></pre>
</div>


<p>Vim regex to replace spaces in images file names of ah HTML page</p>

<div class="highlight"><pre><code class="bash">:%s:<span class="se">\(</span>images<span class="se">\/\)\(\w\+\)\s\(\w\+\.</span>jpg<span class="se">\)</span>:<span class="se">\1\2</span>_<span class="se">\3</span>:g
</code></pre>
</div>


<h3>Copy text to the clipboard</h3>

<div class="highlight"><pre><code class="bash"><span class="nb">echo</span> <span class="s1">&#39;hello world&#39;</span>|pbcopy
cmd + v
</code></pre>
</div>


<h2>Conclusion</h2>

<p>Some of these are quite basic but useful none-the-less, please add your own to the comments below.
Many thanks, and good luck.</p>

<h2>Updated...</h2>

<h3>Script function for .bash_profile to cd to the last opened finder location</h3>

<p>This is a script written by a colleague.  <a href="http://www.visualcortex.co.uk/">James Power</a>.
Add the following function to your <strong>.bash_profile</strong> in Apple OSX.  Now open a directory in Finder, then open terminal and type <strong>cdf</strong>, your terminal will now change directory to the same one as the last Finder opened.</p>

<div class="highlight"><pre><code class="bash"><span class="c"># function to change directory to the one set in the last opened finder.</span>
cdf <span class="o">()</span> <span class="o">{</span>
   <span class="nv">currFolderPath</span><span class="o">=</span><span class="k">$(</span> /usr/bin/osascript &lt;&lt;<span class="s2">&quot;           EOT&quot;</span>
       tell application <span class="s2">&quot;Finder&quot;</span>
           try
               <span class="nb">set </span>currFolder to <span class="o">(</span>folder of the front window as <span class="nb">alias</span><span class="k">)</span>
           on error
               <span class="nb">set </span>currFolder to <span class="o">(</span>path to desktop folder as <span class="nb">alias</span><span class="o">)</span>
           end try
           POSIX path of currFolder
       end tell
            EOT
   <span class="o">)</span>
   <span class="nb">echo</span> <span class="s2">&quot;cd to \&quot;$currFolderPath\&quot;&quot;</span>
   <span class="nb">cd</span> <span class="s2">&quot;$currFolderPath&quot;</span>
<span class="o">}</span>
</code></pre>
</div>


<p>Also for a much more comprehensive list of commands check out: <a href="http://www.commandlinefu.com/commands/tagged/34/bash">http://www.commandlinefu.com/commands/tagged/34/bash</a></p>

<h3>Ruby Rush command-line tool</h3>

<p>If you use <strong>Ruby</strong> maybe check out <a href="http://rush.heroku.com/">Rush</a>, it allows you do use Ruby in a bash command-line like way.</p>

</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>24 Jun 2010</span> &raquo; <a href="/2010/06/ruby-quine-example">Ruby Quine Example</a></li>
    
      <li><span>11 May 2010</span> &raquo; <a href="/2010/05/what-is-the-difference-between-a-proc-and-a-lambda-in-ruby">What is the Difference Between a Proc and a Lambda in Ruby?</a></li>
    
      <li><span>09 May 2010</span> &raquo; <a href="/2010/05/code-kata-four-exercise-a-ruby-solution">Code Kata Four Exercise - A Ruby Solution</a></li>
    
  </ul>
</div>
 
            <div class="footer">  
					    <div class="rss">
					      <a href="http://feeds.feedburner.com/ben-emson">
					        <img src="/images/rss.png" alt="Subscribe to RSS Feed" />
					      </a>
					    </div>
                <p>A project by <a href="http://blog.emson.co.uk">Ben Emson</a> | <a href="http://twitter.com/emson">@emson</a>.</p> 
            </div> 
 
        </div> 
				<!-- Google Analytics -->
    </body> 
</html>