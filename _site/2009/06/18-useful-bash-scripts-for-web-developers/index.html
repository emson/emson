<!DOCTYPE html> 
<html lang="en"> 
    <head> 
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <title>18 Useful bash scripts for web developers</title> 
				<meta name="author" content="Ben Emson" />
				<link href="http://feeds.feedburner.com/ben-emson" rel="alternate" title="Ben Emsonr" type="application/atom+xml" />

			   <!-- syntax highlighting CSS -->
			   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

			   <!-- Homepage CSS -->
			   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
    </head> 
 
    <body>  
        <div id="container"> 
 
            <h1><a href="http://blog.emson.co.uk">Ben Emson</a></h1> 
            
            <div id="post">
<h2>Using bash scripts to become a more efficient web developer</h2>

<p>Here are a few scripts, that I find really useful for speeding up my web development time.</p>

<p>I've been building up this list as I needed to use them - so they maybe a little raw.</p>

<p>For example often clients send me images with filenames that don't match my naming standard, so running the appropriate script really helps keep me focussed on the job in hand and not waste too much time reformatting filenames etc.</p>

<p>Finally if you have any useful little bash scripts why don't you add them to the comments below?</p>

<h3>Bash script to append a .txt extension to a filename</h3>

<p>Iterate over the current directory, get all files with .log and append .txt to the end of the entire filename:</p>

<pre><code>for i in *.log*; do mv "$i" "$i.txt"; done
</code></pre>

<h3>Script to make filenames lowercase</h3>

<p>Converts all the file names in a directory and converts them to lowercase.</p>

<p>echo version:</p>

<pre><code>for i in *.log*; do echo mv \"$i\" \"`echo $i| tr [A-Z] [a-z]`\"; done
</code></pre>

<p>real version:</p>

<pre><code>for i in *.txt; do mv "$i" "`echo $i| tr [A-Z] [a-z]`"; done
</code></pre>

<h3>Quick note on how to use grep to search for a string in file</h3>

<p>-o print Only the matched parts of a matching line, with each part on a separate line.
-H print the filename for each match.
-n prefix each line of output with the 1 based line number.
-R, -r recursively read all files under subdirectories.</p>

<pre><code>grep -oHnr "some pattern"  *.txt
</code></pre>

<p>{txt,log} this globs the file extensions together.
2>/dev/null this passes all errors to a blackhole, so that they won't be displayed.</p>

<pre><code>grep 123741 ./adapter_logs/*.{txt,log} 2&gt;/dev/null
</code></pre>

<p>Find all occurrences of 123741 in all .txt and .log files in all subdirectories.</p>

<pre><code>for i in 'find . -type d'; do grep 123741 $i/*.{txt,log}; done 2&gt;/dev/null
</code></pre>

<h3>List all files that match this regular expression in the current direcory</h3>

<p>All files with the number 5 in their name.</p>

<pre><code>ls | grep -e .*5.*
</code></pre>

<h3>Bash script to check whether a tag exists in a subversion repository</h3>

<pre><code>svn ls http://www.mysvnserver.co.uk/myproject/tags | grep mytag-0.7.0.1/
</code></pre>

<p>The [ ] is known as a Test, by default it tests integers
Also to end an if statement you use fi</p>

<pre><code>if [ 1 = 1 ] ; then echo YES; else echo NO; fi

if [ "`svn ls http://mysvnserver/mysvnrepository/myproject/tags | grep R-9.20.400.0/`" = "R-9.20.400.0/" ]; then echo YES; else echo NO; fi
</code></pre>

<p>Note need the / in the evaluation part of "it-0.9.0.7/", don't really need it in grep it-0.9.0.7/</p>

<pre><code>$ if [ "`svn ls http://www.mysvnserver.co.uk/myproject/tags | grep it-0.7.0.1/`" = "it-0.7.0.1/" ]; then echo YES; else echo NO; fi
</code></pre>

<h3>Quick note on how to increment a variable, in a bash script</h3>

<pre><code>j=0; j=$(($j+1))
</code></pre>

<p>incrementing in a loop</p>

<pre><code>j=0;for i in *.txt; do echo "some_file_"$j".txt"; j=$(($j+1)); done
</code></pre>

<h3>Using a bash for loop to list all text files and append whoopee</h3>

<pre><code>for i in *.txt; do echo $i"whoopee"; done
</code></pre>

<h3>Change all filenames to be a specific incremented name, starting from file 16</h3>

<pre><code>j=16;for i in *.jpg; do mv "$i" "gallery_"$j".jpg"; j=$(($j+1)); done;ls
</code></pre>

<h3>Script to loop through all .txt filenames and make them lower case</h3>

<pre><code>for i in *.txt; do mv "$i" "`echo $i| tr [A-Z] [a-z]`"; done
</code></pre>

<h3>Get all JPG files and create the appropriate HTML list tags for them and add them to a file</h3>

<p>Create an HTML version:</p>

<pre><code>for i in *.jpg; do echo "\t&lt;li&gt;\r\t\t&lt;img src='images/$i' alt='' /&gt;\r\t&lt;/li&gt;"; done &gt; list_items.html
</code></pre>

<p>Create a HAML version:</p>

<pre><code>for i in *.jpg; do echo "\t%li\r\t\t%img{ :src =&gt; 'images/$i', :alt =&gt; '' }\r"; done &gt; imgs.haml
</code></pre>

<h3>Batch change a misspelled filename of certain files, using string replacement</h3>

<pre><code>for i in aples*.jpg; do mv $i ${i/aples/apples} ; done
</code></pre>

<h3>Script to batch create files based on filenames in a file</h3>

<p>Create a file called something like "my_files.txt" with the following content:</p>

<blockquote><p>archive_error_112480_0040.txt
archive_error_114390_0043.txt
etc...</p></blockquote>

<p>Commands:</p>

<pre><code>for i in `sed -n -e 'p' my_files.txt`; do mkdir a_test/$i; done
or
while read x; do touch $x; done &lt; my_files.txt
or
cat my_files.txt | xargs touch
(xargs passes each line as an argument into EACH touch)
</code></pre>

<h3>Using bash Expansions, and allow escapes</h3>

<p>-e is an undocumented flag that allows escapes
Expansion ${command/parameter/substitution} everything else needs to be escaped.</p>

<pre><code>echo -e ${PATH//\:/\\n}
</code></pre>

<h3>Executing a .bash_script after making changes</h3>

<pre><code>source .bash_profile
or
. .bash_profile
</code></pre>

<p>NB: you can 'include' other bash .sh scripts in a .bash_profile file by using 'source' or '.'</p>

<h3>Quick tip on using curl for downloading files off the web</h3>

<p>Use -O to name the remote file, curl will save it locally but remove the rest of the path.</p>

<pre><code>curl -O http://rubyforge-files.ruby-forum.com/rubygems/rubygems-0.9.0.tgz
</code></pre>

<h3>Bash command for testing the existence of files and directories</h3>

<p>If a directory does NOT exist create it</p>

<pre><code>[ -d "/var/cache/git" ] || mkdir /var/cache/git
</code></pre>

<p>If a file exists echo a message:</p>

<pre><code>[ -f "./new_file.txt" ] &amp;&amp; echo "its there"
</code></pre>

<h3>Bash command to remove spaces from filenames</h3>

<pre><code>for i in *.html; do mv "$i" "`echo $i| tr -d ' '`"; done
</code></pre>

<p>replace spaces for underscores</p>

<pre><code>for i in *.html; do mv "$i" "`echo $i| tr ' ' '_'`"; done
</code></pre>

<p>Vim regex to replace spaces in images file names of ah HTML page</p>

<pre><code>:%s:\(images\/\)\(\w\+\)\s\(\w\+\.jpg\):\1\2_\3:g
</code></pre>

<h3>Copy text to the clipboard</h3>

<pre><code>echo 'hello world'|pbcopy
cmd + v
</code></pre>

<h2>Conclusion</h2>

<p>Some of these are quite basic but useful none-the-less, please add your own to the comments below.
Many thanks, and good luck.</p>

<h2>Updated...</h2>

<h3>Script function for .bash_profile to cd to the last opened finder location</h3>

<p>This is a script written by a colleague.  <a href="http://www.visualcortex.co.uk/">James Power</a>.
Add the following function to your <strong>.bash_profile</strong> in Apple OSX.  Now open a directory in Finder, then open terminal and type <strong>cdf</strong>, your terminal will now change directory to the same one as the last Finder opened.</p>

<pre><code># function to change directory to the one set in the last opened finder.
cdf () {
   currFolderPath=$( /usr/bin/osascript &lt;&lt;"         EOT"
       tell application "Finder"
           try
               set currFolder to (folder of the front window as alias)
           on error
               set currFolder to (path to desktop folder as alias)
           end try
           POSIX path of currFolder
       end tell
            EOT
   )
   echo "cd to \"$currFolderPath\""
   cd "$currFolderPath"
}
</code></pre>

<p>Also for a much more comprehensive list of commands check out: <a href="http://www.commandlinefu.com/commands/tagged/34/bash">http://www.commandlinefu.com/commands/tagged/34/bash</a></p>

<h3>Ruby Rush command-line tool</h3>

<p>If you use <strong>Ruby</strong> maybe check out <a href="http://rush.heroku.com/">Rush</a>, it allows you do use Ruby in a bash command-line like way.</p>

</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>24 Jun 2010</span> &raquo; <a href="/2010/06/ruby-quine-example">Ruby Quine Example</a></li>
    
      <li><span>11 May 2010</span> &raquo; <a href="/2010/05/what-is-the-difference-between-a-proc-and-a-lambda-in-ruby">What is the Difference Between a Proc and a Lambda in Ruby?</a></li>
    
      <li><span>09 May 2010</span> &raquo; <a href="/2010/05/code-kata-four-exercise-a-ruby-solution">Code Kata Four Exercise - A Ruby Solution</a></li>
    
  </ul>
</div>
 
            <div class="footer">  
					    <div class="rss">
					      <a href="http://feeds.feedburner.com/ben-emson">
					        <img src="/images/rss.png" alt="Subscribe to RSS Feed" />
					      </a>
					    </div>
                <p>A project by <a href="http://blog.emson.co.uk">Ben Emson</a> | <a href="http://twitter.com/emson">@emson</a>.</p> 
            </div> 
 
        </div> 
				<!-- Google Analytics -->
    </body> 
</html>